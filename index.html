<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BakeWatt - Math Multiplication Visualizer</title>
  <link rel="stylesheet" href="/src/styles/base.css">
  <link rel="stylesheet" href="/src/styles/tab-navigation.css">
  <link rel="stylesheet" href="/src/styles/math-panel.css">
  <link rel="stylesheet" href="/src/styles/transfer-panel.css">
  <link rel="stylesheet" href="/src/styles/recipe-collection.css">
  <link rel="stylesheet" href="/src/styles/recipe-details-modal.css">
  <link rel="stylesheet" href="/src/styles/cooking-step.css">
  <link rel="stylesheet" href="/src/styles/production.css">
</head>
<body>
  <div id="app">
    <div id="three-container"></div>
    <div id="ui-overlay">
      <!-- Tab Navigation -->
      <div class="tab-navigation">
        <button class="tab-button active" id="math-tab">
          <span class="tab-icon">🔢</span>
          <span>Math Practice</span>
        </button>
        <button class="tab-button" id="transfer-tab">
          <span class="tab-icon">📦</span>
          <span>Ingredient Transfer</span>
        </button>
        <button class="tab-button" id="recipes-tab">
          <span class="tab-icon">📚</span>
          <span>Recipe Collection</span>
        </button>
      </div>

      <!-- Math Practice Panel -->
      <div class="ui-panel" id="math-panel">
        <div class="input-group">
          <label for="factor1">First Number:</label>
          <input type="number" id="factor1" min="1" max="20" value="4">
        </div>
        <div class="input-group">
          <label for="factor2">Second Number:</label>
          <input type="number" id="factor2" min="1" max="20" value="3">
        </div>
        <div class="button-group">
          <button class="btn-visualize" id="visualize-btn">Show Cubes</button>
          <button class="btn-calculate" id="calculate-btn">Show Result</button>
        </div>
        <div class="zoom-control">
          <label for="zoom-slider">Zoom:</label>
          <input type="range" id="zoom-slider" min="0.3" max="8" step="0.1" value="1" class="zoom-slider">
          <span id="zoom-value">1.0x</span>
        </div>
        <div id="result" class="result-display" style="display: none;"></div>
      </div>
      
      <!-- Recipe Scaling Panel -->
      <div class="recipe-panel" style="display: none;">
        <h3>🍪 Recipe Scaling</h3>
        <div class="recipe-info">
          <div class="recipe-header">
            <span id="recipe-name">Simple Cookies</span>
            <span id="recipe-icon">🍪</span>
          </div>
          <div class="recipe-servings">
            <span>Base servings: </span>
            <span id="base-servings">2</span>
          </div>
        </div>
        
        <div class="scaling-controls">
          <div class="input-group">
            <label for="target-servings">Target servings:</label>
            <input type="number" id="target-servings" min="1" max="20" value="6">
          </div>
          <div class="scaling-math">
            <span id="scaling-equation">2 servings × 3 = 6 servings</span>
          </div>
        </div>
        
        <div class="ingredient-scaling">
          <h4>Ingredient Scaling:</h4>
          <div id="ingredient-problems"></div>
        </div>
        
        <div class="button-group">
          <button class="btn-visualize" id="visualize-scaling-btn">Show Scaling</button>
          <button class="btn-calculate" id="show-scaled-recipe-btn">Show Scaled Recipe</button>
          <button class="btn-secondary" id="back-to-basic-btn">Back to Basic Math</button>
        </div>
        
        <div id="scaled-recipe-result" class="scaled-result-display" style="display: none;"></div>
      </div>
      
      <!-- Ingredient Transfer Panel -->
      <div class="transfer-panel" id="transfer-panel" style="display: none;">
        <h3>📦 Pantry Transfer</h3>
        <div class="transfer-info">
          <p>Move ingredients from pantry to baking counter using subtraction!</p>
        </div>
        
        <div class="pantry-inventory">
          <h4>📚 Pantry Inventory</h4>
          <div id="pantry-items" class="inventory-grid">
            <!-- Will be populated dynamically -->
          </div>
        </div>
        
        <div class="baking-counter-display">
          <h4>🔥 Baking Counter</h4>
          <div id="counter-items" class="inventory-grid">
            <div class="empty-counter">
              <span>Counter is empty</span>
              <small>Transfer ingredients to start baking!</small>
            </div>
          </div>
        </div>
        
        <div class="transfer-controls" style="display: none;">
          <h4>Transfer Ingredient</h4>
          <div class="ingredient-info">
            <span id="transfer-ingredient-name">Flour</span>
            <span id="transfer-ingredient-icon">🌾</span>
          </div>
          <div class="transfer-amounts">
            <div class="amount-display">
              <label>Available in pantry:</label>
              <span id="pantry-amount">10 cups</span>
            </div>
            <div class="input-group">
              <label for="transfer-amount">Amount to transfer:</label>
              <input type="number" id="transfer-amount" min="1" max="20" value="1">
              <span id="transfer-unit">cups</span>
            </div>
          </div>
          <div class="subtraction-problem">
            <div id="subtraction-equation">10 cups - 1 cup = 9 cups remaining</div>
          </div>
          <div class="button-group">
            <button class="btn-visualize" id="visualize-transfer-btn">Show Subtraction</button>
            <button class="btn-calculate" id="confirm-transfer-btn">Confirm Transfer</button>
            <button class="btn-secondary" id="cancel-transfer-btn">Cancel</button>
          </div>
          <div id="transfer-result" class="transfer-result-display" style="display: none;"></div>
        </div>
      </div>

      <!-- Recipe Collection Panel -->
      <div class="recipe-collection-panel" id="recipe-collection-panel">
        <h2>📚 Recipe Collection</h2>
        
        <div class="recipe-grid" id="recipe-grid">
          <!-- Will be populated dynamically with recipes -->
        </div>
      </div>

      <!-- Recipe Details Modal -->
      <div class="recipe-details-modal" id="recipe-details-modal">
        <div class="recipe-details-content">
          <button class="recipe-details-close" id="recipe-details-close">×</button>
          
          <div class="recipe-details-header">
            <div class="recipe-details-icon" id="recipe-details-icon">🍪</div>
            <h1 class="recipe-details-title" id="recipe-details-title">Recipe Name</h1>
          </div>
          
          <div class="recipe-details-meta" id="recipe-details-meta">
            <!-- Will be populated dynamically -->
          </div>
          
          <div class="recipe-details-description" id="recipe-details-description">
            Recipe description will appear here
          </div>
          
          <div class="recipe-ingredients-section">
            <h3>🧄 Ingredients</h3>
            <div class="pantry-button-container">
              <button class="btn-pantry" id="btn-show-pantry">
                📦 View Pantry Stock
              </button>
            </div>
            <div id="recipe-details-ingredients">
              <!-- Will be populated dynamically -->
            </div>
          </div>
          
          <div class="recipe-steps-section">
            <h3>📋 Instructions</h3>
            <div id="recipe-details-steps">
              <!-- Will be populated dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Pantry Stock Modal -->
      <div class="pantry-stock-modal" id="pantry-stock-modal">
        <div class="pantry-stock-content">
          <button class="pantry-stock-close" id="pantry-stock-close">×</button>
          
          <div class="pantry-stock-header">
            <div class="pantry-stock-icon">📦</div>
            <h1 class="pantry-stock-title">Pantry Stock</h1>
          </div>
          
          <div class="pantry-stock-grid" id="pantry-stock-grid">
            <!-- Will be populated dynamically -->
          </div>
        </div>
      </div>

      <!-- Cooking Step Panel -->
      <div class="cooking-step-panel" id="cooking-step-panel">
        <div class="cooking-step-header">
          <div class="cooking-step-title">
            <div class="cooking-step-icon" id="cooking-step-icon">🍪</div>
            <div class="cooking-step-info">
              <h2 id="cooking-step-name">Step 1: Mix Dry Ingredients</h2>
              <p id="cooking-recipe-name">Chocolate Chip Cookies</p>
            </div>
          </div>
          <div class="cooking-step-meta">
            <span id="cooking-step-time">⏱️ 5 min</span>
            <span id="cooking-step-number">Step 1 of 4</span>
          </div>
        </div>

        <div class="cooking-step-body">
          <div class="cooking-step-left">
            <div class="step-instructions">
              <h3>📋 Instructions</h3>
              <ul class="step-instructions-list" id="cooking-instructions">
                <!-- Will be populated dynamically -->
              </ul>
            </div>

            <div class="baking-counter" id="baking-counter">
              <h3>🔥 Baking Counter</h3>
              <div class="baking-counter-grid" id="baking-counter-grid">
                <div class="baking-counter-empty">
                  Transfer all ingredients here to proceed
                </div>
              </div>
            </div>

            <div class="cooking-proceed-section">
              <div class="proceed-status waiting" id="proceed-status">
                Transfer all ingredients to proceed to next step
              </div>
              <button class="btn-proceed" id="btn-proceed" disabled>
                Proceed to Next Step
              </button>
              <button class="btn-cancel-cooking" id="btn-cancel-cooking">
                Cancel Cooking
              </button>
            </div>
          </div>

          <div class="cooking-step-right">
            <div class="ingredient-zones">
              <h3>📦 Required Ingredients</h3>
              <div id="ingredient-zones-list">
                <!-- Will be populated dynamically -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Production Panel -->
      <div class="production-panel" id="production-panel">
        <div class="production-header">
          <h1 class="production-title">
            <span id="production-icon">🍪</span>
            <span>Production & Packaging</span>
          </h1>
          <p class="production-subtitle" id="production-subtitle">
            Your Chocolate Chip Cookies are ready! Now let's package them.
          </p>
        </div>

        <div class="production-flow" id="production-flow">
          <!-- Step 1: Initial Production -->
          <div class="production-step initial">
            <div class="step-header">
              <h3 class="step-title">
                <span class="step-icon">🍪</span>
                <span>Baked Items</span>
              </h3>
              <div class="step-math" id="initial-math">Recipe produces 2 items</div>
            </div>
            
            <div class="step-visualization">
              <div class="visual-group">
                <div class="visual-items grid-2" id="initial-items">
                  <!-- Will be populated dynamically -->
                </div>
                <div class="visual-label">Finished Items</div>
              </div>
            </div>
            
            <div class="step-total" id="initial-total">Total: 2 items</div>
          </div>

          <!-- Step 2: Subdivision (Cutting) -->
          <div class="production-step subdivision">
            <div class="step-header">
              <h3 class="step-title">
                <span class="step-icon">🔪</span>
                <span>Cut into Pieces</span>
              </h3>
              <div class="step-math" id="cutting-math">2 items × 24 pieces each = 48 pieces</div>
            </div>
            
            <div class="step-controls">
              <div class="slider-control">
                <label class="slider-label">Pieces per item:</label>
                <input type="range" class="production-slider" id="cutting-slider" 
                       min="1" max="50" value="24" step="1">
                <span class="slider-value" id="cutting-value">24</span>
              </div>
            </div>

            <div class="step-visualization">
              <div class="visual-group">
                <div class="visual-items grid-2" id="items-before-cutting">
                  <!-- Will be populated dynamically -->
                </div>
                <div class="visual-label">Items</div>
              </div>
              
              <div class="flow-arrow">→</div>
              
              <div class="visual-group">
                <div class="visual-items grid-8" id="pieces-after-cutting">
                  <!-- Will be populated dynamically -->
                </div>
                <div class="visual-label">Individual Pieces</div>
              </div>
            </div>
            
            <div class="step-total" id="cutting-total">Total: 48 pieces</div>
          </div>

          <!-- Step 3: Combination (Packaging) -->
          <div class="production-step combination">
            <div class="step-header">
              <h3 class="step-title">
                <span class="step-icon">🎁</span>
                <span>Package into Bundles</span>
              </h3>
              <div class="step-math" id="packaging-math">48 pieces ÷ 4 per package = 12 packages</div>
            </div>
            
            <div class="step-controls">
              <div class="slider-control">
                <label class="slider-label">Pieces per package:</label>
                <input type="range" class="production-slider" id="packaging-slider" 
                       min="1" max="12" value="4" step="1">
                <span class="slider-value" id="packaging-value">4</span>
              </div>
            </div>

            <div class="step-visualization">
              <div class="visual-group">
                <div class="visual-items grid-8" id="pieces-before-packaging">
                  <!-- Will be populated dynamically -->
                </div>
                <div class="visual-label">Individual Pieces</div>
              </div>
              
              <div class="flow-arrow">→</div>
              
              <div class="visual-group">
                <div class="visual-items grid-6" id="packages-after-packaging">
                  <!-- Will be populated dynamically -->
                </div>
                <div class="visual-label">Packages</div>
              </div>
            </div>
            
            <div class="step-total" id="packaging-total">Total: 12 packages</div>
          </div>

          <!-- Mathematical Relationship Summary -->
          <div class="mathematical-relationship">
            <div class="math-equation" id="total-math-equation">
              2 items × 24 pieces/item ÷ 4 pieces/package = 12 packages
            </div>
            <div class="math-explanation">
              Understanding multiplication and division through production
            </div>
          </div>
        </div>

        <div class="production-actions">
          <button class="btn-production primary" id="btn-finish-production">
            Finish & Store Products
          </button>
          <button class="btn-production secondary" id="btn-back-to-cooking">
            Back to Cooking
          </button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>